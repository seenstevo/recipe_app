<!DOCTYPE html>
<html>
  <head>
    <title>Edit Recipe</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='add_style.css') }}">
  </head>
  <body>
    <h1>Edit Recipe</h1>
    <form method="POST">
      <label for="name">Recipe Name:</label>
      <input type="text" name="name" value="{{ recipe }}" required><br><br>
      
      <label for="category">Category:</label>
      <select name="category">
        <option value="Veggie" {% if recipe.category == "Veggie" %} selected {% endif %}>Veggie</option>
        <option value="Pasta" {% if recipe.category == "Pasta" %} selected {% endif %}>Pasta</option>
        <option value="Meat" {% if recipe.category == "Meat" %} selected {% endif %}>Meat</option>
        <option value="Legume" {% if recipe.category == "Legume" %} selected {% endif %}>Legume</option>
        <option value="Fish" {% if recipe.category == "Fish" %} selected {% endif %}>Fish</option>
      </select><br><br>

      <h2>Ingredients:</h2>
      <div id="ingredients">
        {% for item in ingredients %}
        <div>
          <label for="ingredient">Ingredient:</label>
          <input type="text" name="ingredients[]" value="{{ item[0] }}" required>
          <label for="quantity">Quantity:</label>
          <input type="text" name="quantities[]" value="{{ item[1] }}" required>
          <label for="units">Units:</label>
          <input type="text" name="units[]" value="{{ item[2] }}">
          <button type="button" onclick="removeIngredient(this)">Delete</button>
        </div>
        {% endfor %}
      </div>
      <button type="button" onclick="addIngredient()">Add Ingredient</button><br><br>

      <input type="submit" value="Update Recipe">
    </form>

    <script>
      function addIngredient() {
        var ingredient = document.createElement("div");
        ingredient.innerHTML = '<label for="ingredient">Ingredient:</label> \
                                <input type="text" name="ingredients[]" required> \
                                <label for="quantity">Quantity:</label> \
                                <input type="text" name="quantities[]" required> \
                                <label for="units">Units:</label> \
                                <input type="text" name="units[]"> \
                                <button type="button" onclick="removeIngredient(this)">Delete</button>';
        document.getElementById("ingredients").appendChild(ingredient);
      }

      function removeIngredient(button) {
        var div = button.parentNode;
        div.parentNode.removeChild(div);
      }
    </script>
  </body>
</html>
